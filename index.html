<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Over - File Sharing</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-blue: #0a192f;
            --secondary-blue: #112240;
            --accent-blue: #64ffda;
            --text-light: #ccd6f6;
            --text-white: #e6f1ff;
            --dark-bg: #020c1b;
            --success: #00c896;
            --error: #ff4757;
            --warning: #ffa502;
            --info: #2d98da;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--dark-bg) 0%, var(--primary-blue) 100%);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid var(--accent-blue);
            animation: fadeInDown 0.5s ease;
        }
        
        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--accent-blue);
            text-shadow: 0 0 10px rgba(100, 255, 218, 0.5);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .btn {
            background: var(--accent-blue);
            color: var(--primary-blue);
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.4);
        }
        
        .btn-logout {
            background: transparent;
            color: var(--accent-blue);
            border: 1px solid var(--accent-blue);
        }
        
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 80vh;
            animation: fadeIn 0.5s ease;
        }
        
        .login-form {
            background: var(--secondary-blue);
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            width: 100%;
            max-width: 400px;
        }
        
        .form-title {
            text-align: center;
            margin-bottom: 20px;
            color: var(--accent-blue);
            font-size: 1.8rem;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(100, 255, 218, 0.3);
            border-radius: 4px;
            background: rgba(10, 25, 47, 0.7);
            color: var(--text-white);
        }
        
        .dashboard {
            margin-top: 30px;
            animation: fadeInUp 0.5s ease;
            display: flex;
            flex-direction: column;
            min-height: calc(100vh - 150px);
        }
        
        .dashboard-title {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--accent-blue);
            text-align: center;
        }
        
        .admin-panel, .user-panel {
            background: var(--secondary-blue);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .panel-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--accent-blue);
            border-bottom: 1px solid var(--accent-blue);
            padding-bottom: 10px;
        }
        
        .file-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .file-card {
            background: rgba(10, 25, 47, 0.7);
            border-radius: 8px;
            padding: 15px;
            transition: all 0.3s ease;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }
        
        .file-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(100, 255, 218, 0.2);
        }
        
        .file-name {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--accent-blue);
        }
        
        .file-download {
            display: inline-block;
            margin-top: 10px;
            color: var(--text-light);
            text-decoration: none;
            background: rgba(100, 255, 218, 0.1);
            padding: 5px 10px;
            border-radius: 4px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .file-download:hover {
            background: var(--accent-blue);
            color: var(--primary-blue);
        }
        
        .empty-state {
            text-align: center;
            padding: 40px;
            color: var(--text-light);
            font-style: italic;
        }
        
        .admin-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .control-card {
            background: rgba(10, 25, 47, 0.7);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid rgba(100, 255, 218, 0.2);
        }
        
        .user-list {
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .user-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid rgba(100, 255, 218, 0.1);
        }
        
        .expiry-date {
            font-size: 0.8rem;
            color: var(--accent-blue);
        }
        
        .ban-btn {
            background: #ff4757;
            color: white;
            border: none;
            padding: 3px 8px;
            border-radius: 3px;
            cursor: pointer;
        }
        
        /* Menu Admin */
        .admin-menu {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .menu-btn {
            background: rgba(10, 25, 47, 0.7);
            color: var(--text-light);
            border: 1px solid var(--accent-blue);
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .menu-btn.active {
            background: var(--accent-blue);
            color: var(--primary-blue);
        }
        
        .menu-btn:hover {
            background: var(--accent-blue);
            color: var(--primary-blue);
        }
        
        .admin-content {
            display: none;
            background: var(--secondary-blue);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .admin-content.active {
            display: block;
        }
        
        .admin-actions {
            margin-top: auto;
            padding: 20px;
            background: var(--secondary-blue);
            border-radius: 8px;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        /* Notifikasi */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .notification {
            padding: 15px 20px;
            border-radius: 5px;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            animation: notificationIn 0.3s ease forwards;
        }
        
        .notification.hide {
            animation: notificationOut 0.3s ease forwards;
        }
        
        .notification.success {
            background: var(--success);
        }
        
        .notification.error {
            background: var(--error);
        }
        
        .notification.warning {
            background: var(--warning);
        }
        
        .notification.info {
            background: var(--info);
        }
        
        .notification-icon {
            font-size: 1.2rem;
        }
        
        /* Modal Konfirmasi */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            animation: fadeIn 0.3s ease forwards;
        }
        
        .modal {
            background: var(--secondary-blue);
            padding: 25px;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            width: 90%;
            max-width: 400px;
            animation: modalIn 0.3s ease forwards;
        }
        
        .modal-title {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: var(--accent-blue);
        }
        
        .modal-content {
            margin-bottom: 20px;
        }
        
        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }
        
        .modal-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .modal-btn.confirm {
            background: var(--error);
            color: white;
        }
        
        .modal-btn.cancel {
            background: var(--secondary-blue);
            color: var(--text-light);
            border: 1px solid var(--accent-blue);
        }
        
        /* Animasi */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeInUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInDown {
            from { 
                opacity: 0;
                transform: translateY(-20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(100, 255, 218, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(100, 255, 218, 0); }
            100% { box-shadow: 0 0 0 0 rgba(100, 255, 218, 0); }
        }
        
        @keyframes notificationIn {
            from { 
                transform: translateX(100%);
                opacity: 0;
            }
            to { 
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes notificationOut {
            from { 
                transform: translateX(0);
                opacity: 1;
            }
            to { 
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes modalIn {
            from { 
                transform: scale(0.9);
                opacity: 0;
            }
            to { 
                transform: scale(1);
                opacity: 1;
            }
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .admin-controls {
                grid-template-columns: 1fr;
            }
            
            .file-grid {
                grid-template-columns: 1fr;
            }
            
            .notification-container {
                left: 20px;
                right: 20px;
            }
            
            .admin-menu {
                flex-direction: column;
            }
            
            .admin-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Notifikasi -->
        <div class="notification-container" id="notificationContainer"></div>
        
        <!-- Modal Konfirmasi -->
        <div class="modal-overlay" id="modalOverlay" style="display: none;">
            <div class="modal">
                <h3 class="modal-title" id="modalTitle">Konfirmasi</h3>
                <div class="modal-content" id="modalContent">
                    Apakah Anda yakin ingin melakukan tindakan ini?
                </div>
                <div class="modal-actions">
                    <button class="modal-btn cancel" id="modalCancel">Batal</button>
                    <button class="modal-btn confirm" id="modalConfirm">Ya</button>
                </div>
            </div>
        </div>

        <!-- Halaman Login -->
        <div id="loginPage" class="login-container">
            <div class="login-form">
                <h2 class="form-title">Game Over</h2>
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" placeholder="Masukkan username">
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Masukkan password">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="rememberMe"> Ingat saya
                    </label>
                </div>
                <button class="btn" id="loginBtn" onclick="login()">Login</button>
            </div>
        </div>

        <!-- Halaman Dashboard -->
        <div id="dashboardPage" style="display: none;">
            <header>
                <div class="logo">GAME OVER</div>
                <div class="user-info">
                    <span>Selamat datang, <span id="userDisplayName"></span></span>
                    <span id="expiryInfo" class="expiry-date"></span>
                    <button class="btn btn-logout" onclick="logout()">Logout</button>
                </div>
            </header>

            <div class="dashboard">
                <!-- Panel Admin (hanya ditampilkan untuk admin) -->
                <div id="adminPanel" class="admin-panel" style="display: none;">
                    <h3 class="panel-title">Panel Admin</h3>
                    
                    <!-- Menu Admin -->
                    <div class="admin-menu">
                        <button class="menu-btn active" data-target="uploadContent">Upload File</button>
                        <button class="menu-btn" data-target="createAccountContent">Buat Akun</button>
                        <button class="menu-btn" data-target="userListContent">Daftar Pengguna</button>
                    </div>
                    
                    <!-- Konten Upload File -->
                    <div id="uploadContent" class="admin-content active">
                        <h4>Upload File/Game</h4>
                        <div class="form-group">
                            <input type="text" id="fileName" placeholder="Nama file/game">
                        </div>
                        <div class="form-group">
                            <input type="file" id="fileUpload">
                        </div>
                        <button class="btn" id="uploadBtn" onclick="uploadFile()">Upload</button>
                    </div>
                    
                    <!-- Konten Buat Akun -->
                    <div id="createAccountContent" class="admin-content">
                        <h4>Buat Akun Baru</h4>
                        <div class="form-group">
                            <input type="text" id="newUsername" placeholder="Username">
                        </div>
                        <div class="form-group">
                            <input type="password" id="newPassword" placeholder="Password">
                        </div>
                        <div class="form-group">
                            <label>Masa Aktif (hari):</label>
                            <input type="number" id="expiryDays" value="30" min="1">
                        </div>
                        <button class="btn" id="createAccountBtn" onclick="createAccount()">Buat Akun</button>
                    </div>
                    
                    <!-- Konten Daftar Pengguna -->
                    <div id="userListContent" class="admin-content">
                        <h4>Daftar Pengguna</h4>
                        <div id="userList" class="user-list">
                            <!-- Daftar pengguna akan dimuat di sini -->
                        </div>
                    </div>
                </div>
                
                <!-- Panel Beranda (ditampilkan untuk semua user) -->
                <div class="user-panel">
                    <h3 class="panel-title">Beranda</h3>
                    <div id="fileList" class="file-grid">
                        <!-- Daftar file akan dimuat di sini -->
                    </div>
                </div>
                
                <!-- Area Tindakan Cepat untuk Admin -->
                <div id="adminActions" class="admin-actions" style="display: none;">
                    <h3 class="panel-title">Tindakan Cepat</h3>
                    <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                        <button class="btn" onclick="showContent('uploadContent')">Upload File</button>
                        <button class="btn" onclick="showContent('createAccountContent')">Buat Akun Baru</button>
                        <button class="btn" onclick="showContent('userListContent')">Lihat Pengguna</button>
                        <button class="btn btn-logout" onclick="clearAllFiles()">Hapus Semua File</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data simulasi (dalam aplikasi nyata, data akan disimpan di database)
        let users = JSON.parse(localStorage.getItem('gameOverUsers')) || [];
        let files = JSON.parse(localStorage.getItem('gameOverFiles')) || [];
        let currentUser = null;
        
        // Inisialisasi
        function init() {
            // Setup event listeners
            document.getElementById('modalCancel').addEventListener('click', () => hideModal(false));
            document.getElementById('modalConfirm').addEventListener('click', () => hideModal(true));
            
            document.getElementById('password').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') login();
            });
            
            // Setup menu admin
            const menuButtons = document.querySelectorAll('.menu-btn');
            menuButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Hapus kelas active dari semua menu
                    menuButtons.forEach(btn => btn.classList.remove('active'));
                    // Tambahkan kelas active ke menu yang diklik
                    this.classList.add('active');
                    // Tampilkan konten yang sesuai
                    showContent(this.dataset.target);
                });
            });
            
            // Inisialisasi admin default jika belum ada
            if (!users.find(u => u.username === 'aza123')) {
                users.push({
                    username: 'aza123',
                    password: 'aza123',
                    role: 'admin',
                    createdAt: new Date().toISOString()
                });
                localStorage.setItem('gameOverUsers', JSON.stringify(users));
                showNotification('Akun admin default telah dibuat: username: aza123, password: aza123', 'info');
            }
            
            // Cek apakah ada data yang disimpan untuk login otomatis
            const rememberedUser = localStorage.getItem('rememberedUser');
            if (rememberedUser) {
                const userData = JSON.parse(rememberedUser);
                document.getElementById('username').value = userData.username;
                document.getElementById('password').value = userData.password;
                document.getElementById('rememberMe').checked = true;
            }
        }
        
        // Fungsi untuk menampilkan konten admin
        function showContent(contentId) {
            // Sembunyikan semua konten
            const contents = document.querySelectorAll('.admin-content');
            contents.forEach(content => content.classList.remove('active'));
            
            // Tampilkan konten yang dipilih
            document.getElementById(contentId).classList.add('active');
            
            // Jika menampilkan daftar pengguna, muat ulang data
            if (contentId === 'userListContent') {
                loadUsers();
            }
        }
        
        // Fungsi untuk menampilkan notifikasi
        function showNotification(message, type = 'info') {
            const notificationContainer = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            let icon = 'info-circle';
            if (type === 'success') icon = 'check-circle';
            if (type === 'error') icon = 'exclamation-circle';
            if (type === 'warning') icon = 'exclamation-triangle';
            
            notification.innerHTML = `
                <i class="fas fa-${icon} notification-icon"></i>
                <span>${message}</span>
            `;
            
            notificationContainer.appendChild(notification);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                notification.classList.add('hide');
                setTimeout(() => {
                    if (notificationContainer.contains(notification)) {
                        notificationContainer.removeChild(notification);
                    }
                }, 300);
            }, 5000);
        }
        
        // Fungsi untuk menampilkan modal konfirmasi
        function showModal(title, content) {
            return new Promise((resolve) => {
                document.getElementById('modalTitle').textContent = title;
                document.getElementById('modalContent').textContent = content;
                document.getElementById('modalOverlay').style.display = 'flex';
                
                // Store the resolve function to call later
                window.modalResolve = resolve;
            });
        }
        
        // Fungsi untuk menyembunyikan modal
        function hideModal(result) {
            document.getElementById('modalOverlay').style.display = 'none';
            if (window.modalResolve) {
                window.modalResolve(result);
                window.modalResolve = null;
            }
        }
        
        // Fungsi login
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const rememberMe = document.getElementById('rememberMe').checked;
            
            if (!username || !password) {
                showNotification('Harap isi username dan password!', 'warning');
                return;
            }
            
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                // Cek apakah akun sudah kadaluarsa (kecuali admin)
                if (user.role !== 'admin' && user.expiryDate) {
                    const now = new Date();
                    const expiryDate = new Date(user.expiryDate);
                    if (now > expiryDate) {
                        showNotification('Akun Anda sudah kadaluarsa. Silakan hubungi admin.', 'error');
                        return;
                    }
                }
                
                currentUser = user;
                
                // Simpan info login jika remember me dicentang
                if (rememberMe) {
                    localStorage.setItem('rememberedUser', JSON.stringify({ username, password }));
                } else {
                    localStorage.removeItem('rememberedUser');
                }
                
                // Tampilkan dashboard
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('dashboardPage').style.display = 'block';
                document.getElementById('userDisplayName').textContent = user.username;
                
                // Tampilkan info kadaluarsa untuk user biasa
                if (user.role !== 'admin') {
                    if (user.expiryDate) {
                        const expiryDate = new Date(user.expiryDate);
                        document.getElementById('expiryInfo').textContent = `Aktif hingga: ${expiryDate.toLocaleDateString()}`;
                    }
                    // Sembunyikan panel admin untuk user biasa
                    document.getElementById('adminPanel').style.display = 'none';
                    document.getElementById('adminActions').style.display = 'none';
                } else {
                    document.getElementById('expiryInfo').textContent = 'Akun Admin';
                    // Tampilkan panel admin untuk admin
                    document.getElementById('adminPanel').style.display = 'block';
                    document.getElementById('adminActions').style.display = 'flex';
                }
                
                // Muat daftar file
                loadFiles();
                
                // Muat daftar pengguna hanya untuk admin
                if (user.role === 'admin') {
                    loadUsers();
                }
                
                showNotification('Login berhasil! Selamat datang.', 'success');
            } else {
                showNotification('Username atau password salah!', 'error');
            }
        }
        
        // Fungsi logout
        function logout() {
            currentUser = null;
            document.getElementById('dashboardPage').style.display = 'none';
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('password').value = '';
            showNotification('Anda telah logout.', 'info');
        }
        
        // Fungsi untuk memuat file
        function loadFiles() {
            const fileList = document.getElementById('fileList');
            
            if (files.length === 0) {
                fileList.innerHTML = '<div class="empty-state">Belum ada file yang diupload. Admin akan mengupload file game soon.</div>';
                return;
            }
            
            fileList.innerHTML = '';
            files.forEach((file, index) => {
                const fileCard = document.createElement('div');
                fileCard.className = 'file-card';
                fileCard.innerHTML = `
                    <div class="file-name">${file.name}</div>
                    <div>Uploaded: ${new Date(file.uploadDate).toLocaleDateString()}</div>
                    <div class="file-download" onclick="downloadFile(${index})">
                        <i class="fas fa-download"></i> Download
                    </div>
                `;
                fileList.appendChild(fileCard);
            });
        }
        
        // Fungsi untuk mendownload file
        function downloadFile(index) {
            const file = files[index];
            if (!file || !file.url) {
                showNotification('File tidak ditemukan!', 'error');
                return;
            }
            
            // Buat elemen <a> sementara untuk download
            const a = document.createElement('a');
            a.href = file.url;
            a.download = file.name || 'download';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            
            showNotification(`Mendownload ${file.name}`, 'success');
        }
        
        // Fungsi untuk memuat daftar pengguna (admin only)
        function loadUsers() {
            if (currentUser.role !== 'admin') return;
            
            const userList = document.getElementById('userList');
            userList.innerHTML = '';
            
            // Filter hanya user biasa (bukan admin)
            const regularUsers = users.filter(u => u.role !== 'admin');
            
            if (regularUsers.length === 0) {
                userList.innerHTML = '<div class="empty-state">Belum ada pengguna terdaftar</div>';
                return;
            }
            
            regularUsers.forEach(user => {
                const userItem = document.createElement('div');
                userItem.className = 'user-item';
                
                const expiryInfo = user.expiryDate ? 
                    `Aktif hingga: ${new Date(user.expiryDate).toLocaleDateString()}` : 
                    'Tidak ada masa aktif';
                
                userItem.innerHTML = `
                    <div>${user.username}</div>
                    <div>${expiryInfo}</div>
                    <button class="ban-btn" onclick="banUser('${user.username}')">Hapus</button>
                `;
                
                userList.appendChild(userItem);
            });
        }
        
        // Fungsi untuk mengupload file (admin only)
        function uploadFile() {
            if (currentUser.role !== 'admin') {
                showNotification('Hanya admin yang dapat mengupload file!', 'error');
                return;
            }
            
            const fileName = document.getElementById('fileName').value;
            const fileInput = document.getElementById('fileUpload');
            
            if (!fileName || fileInput.files.length === 0) {
                showNotification('Harap isi nama file dan pilih file!', 'warning');
                return;
            }
            
            // Simulasi upload file
            const file = fileInput.files[0];
            
            // Gunakan FileReader untuk membaca file sebagai URL
            const reader = new FileReader();
            reader.onload = function(e) {
                const fileUrl = e.target.result;
                
                files.push({
                    name: fileName,
                    url: fileUrl,
                    uploadDate: new Date().toISOString(),
                    type: file.type,
                    size: file.size
                });
                
                localStorage.setItem('gameOverFiles', JSON.stringify(files));
                
                showNotification('File berhasil diupload!', 'success');
                document.getElementById('fileName').value = '';
                document.getElementById('fileUpload').value = '';
                
                loadFiles();
            };
            
            reader.readAsDataURL(file);
        }
        
        // Fungsi untuk membuat akun baru (admin only)
        function createAccount() {
            if (currentUser.role !== 'admin') {
                showNotification('Hanya admin yang dapat membuat akun!', 'error');
                return;
            }
            
            const username = document.getElementById('newUsername').value;
            const password = document.getElementById('newPassword').value;
            const expiryDays = parseInt(document.getElementById('expiryDays').value);
            
            if (!username || !password) {
                showNotification('Harap isi username dan password!', 'warning');
                return;
            }
            
            // Cek apakah username sudah ada
            if (users.find(u => u.username === username)) {
                showNotification('Username sudah digunakan!', 'error');
                return;
            }
            
            // Hitung tanggal kadaluarsa
            const expiryDate = new Date();
            expiryDate.setDate(expiryDate.getDate() + expiryDays);
            
            // Tambahkan user baru
            users.push({
                username,
                password,
                role: 'user',
                createdAt: new Date().toISOString(),
                expiryDate: expiryDate.toISOString()
            });
            
            localStorage.setItem('gameOverUsers', JSON.stringify(users));
            
            showNotification('Akun berhasil dibuat!', 'success');
            document.getElementById('newUsername').value = '';
            document.getElementById('newPassword').value = '';
            
            loadUsers();
        }
        
        // Fungsi untuk menghapus pengguna (admin only)
        async function banUser(username) {
            if (currentUser.role !== 'admin') return;
            
            const confirmed = await showModal('Konfirmasi Hapus', `Apakah Anda yakin ingin menghapus pengguna ${username}?`);
            
            if (confirmed) {
                users = users.filter(u => u.username !== username);
                localStorage.setItem('gameOverUsers', JSON.stringify(users));
                loadUsers();
                showNotification(`Pengguna ${username} telah dihapus.`, 'success');
            }
        }
        
        // Fungsi untuk menghapus semua file (admin only)
        async function clearAllFiles() {
            if (currentUser.role !== 'admin') return;
            
            const confirmed = await showModal('Konfirmasi Hapus', 'Apakah Anda yakin ingin menghapus semua file? Tindakan ini tidak dapat dibatalkan.');
            
            if (confirmed) {
                files = [];
                localStorage.setItem('gameOverFiles', JSON.stringify(files));
                loadFiles();
                showNotification('Semua file telah dihapus.', 'success');
            }
        }
        
        // Inisialisasi aplikasi saat halaman dimuat
        init();
    </script>
</body>
</html>